(function(e){e.DOMReady=function(){var t=[],n=!1,r=null,i=function(e,t){try{e.apply(this,t||[])}catch(n){r&&r.call(this,n)}},s=function(){n=!0;for(var e=0;e<t.length;e++)i(t[e].fn,t[e].args||[]);t=[]};this.setOnError=function(e){r=e;return this};this.add=function(e,r){n?i(e,r):t[t.length]={fn:e,args:r};return this};e.addEventListener?e.document.addEventListener("DOMContentLoaded",function(){s()},!1):function(){if(!e.document.uniqueID&&e.document.expando)return;var t=e.document.createElement("document:ready");try{t.doScroll("left");s()}catch(n){setTimeout(arguments.callee,0)}}();return this}()})(window);if(!window.Element){Element=function(){};var __createElement=document.createElement;document.createElement=function(e){var t=__createElement(e);for(var n in Element.prototype)t[n]=Element.prototype[n];return t};var __getElementById=document.getElementById;document.getElementById=function(e){var t=__getElementById(e);for(var n in Element.prototype)t[n]=Element.prototype[n];return t}}(function(e){e=document,a=e.styleSheets[0]||e.createStyleSheet();e.querySelectorAll=function(t){a.addRule(t,"f:b");for(var n=e.all,r=0,i=[],s=n.length;r<s;r++)n[r].currentStyle.f&&i.push(n[r]);a.removeRule(0);return i}})();if(!document.addEventListener){document.addEventListener=function(e,t){return this.attachEvent(e,t)};Element.prototype.addEventListener=document.addEventListener}if(!document.getElementsByClassName){document.getElementsByClassName=function(e){return this.querySelectorAll("."+e)};Element.prototype.getElementsByClassName=document.getElementsByClassName}var DwollaBtn=DwollaBtn||function(){var e={cssURI:"https://www.dwolla.com/content/button.min.css",dwollaPayAction:"https://www.dwolla.com/payment/pay"};return{init:function(){if(window.isDwollaReady)return!1;window.isDwollaReady=!0;this.appendCSS();this.styleButtons();this.registerButtons();this.handleResponse();return!0},appendCSS:function(){var t=document.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("href",e.cssURI);document.getElementsByTagName("head")[0].appendChild(t)},styleButtons:function(){var e=document.getElementsByClassName("dwolla_button");for(i=0;i<e.length;i++){var t=e[i],n=t.getAttribute("data-amount");if(t.className.indexOf("d-btn")===-1){var r=document.createElement("span");r.setAttribute("class","d-btn-text");r.setAttribute("id","d-btn-text");r.appendChild(document.createTextNode(t.firstChild.nodeValue));t.replaceChild(r,t.firstChild);var s=document.createElement("span");s.setAttribute("class","d-btn-icon");t.appendChild(s);t.className+=" d-btn"}}},registerButtons:function(){var t=function(e,t){var n=function(e){return e.className.indexOf("d-btn")!==-1&&e.nodeName=="A"};return n(e)?e:n(t)?t:!1},n=function(n){var r=n.target||n.srcElement,i=r.parentNode,s;if(s=t(r,i)){n.preventDefault?n.preventDefault():n.returnValue=!1;var o=document.createElement("form");o.setAttribute("method","POST");o.setAttribute("action",e.dwollaPayAction);var u={destinationId:null,amount:s.getAttribute("data-amount"),shipping:s.getAttribute("data-shipping"),tax:s.getAttribute("data-tax"),name:s.getAttribute("data-name"),description:s.getAttribute("data-desc"),redirect:s.getAttribute("href"),key:s.getAttribute("data-key"),orderId:s.getAttribute("data-orderid"),facilitatorAmount:s.getAttribute("data-facilitator-fee"),notes:s.getAttribute("data-notes"),test:s.getAttribute("data-test"),allowFundingSources:s.getAttribute("data-guest-checkout")};for(key in u)if(u[key]!=null){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name",key);a.setAttribute("value",u[key]);o.appendChild(a)}document.getElementsByTagName("body")[0].appendChild(o);o.submit();return!1}};document.addEventListener("onclick",n);document.addEventListener("click",n)},handleResponse:function(){var e=function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))};e("error")=="failure"&&e("error_description")&&alert("There seemed to have been a problem with the transaction. Dwolla said: "+e("error_description"));return!0}}}();DOMReady.add(function(){DwollaBtn.init();document.addEventListener("DOMSubtreeModified",function(){DwollaBtn.init()})});